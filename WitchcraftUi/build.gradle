buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "com.moowork.gradle:gradle-node-plugin:1.2.0"
    }
}

plugins {
    id "com.moowork.gulp" version "1.2.0"
}

apply plugin: "com.moowork.node"

group 'com.tarbadev.witchcraft'
version '0.0.1-SNAPSHOT'

repositories {
    mavenCentral()
}

node {
    download = true
}

jar {
    from 'build/dist'

    includeEmptyDirs = false
}

gulp {
    colors = true
    bufferOutput = false
}

def srcDir = new File(projectDir, "src")
def targetDir = new File(project.buildDir, "dist")
gulp_dist.inputs.dir srcDir
gulp_dist.outputs.dir targetDir

installGulp.dependsOn npmInstall
gulp_build.dependsOn installGulp
jar.dependsOn gulp_build